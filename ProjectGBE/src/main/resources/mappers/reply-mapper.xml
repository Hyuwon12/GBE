<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="replyMapper">
	<resultMap type="Reply" id="replyResultSet">		
		<result column="REPLY_NO" property="replyNo"/>
		<result column="REPLY_CONTENT" property="replyContent"/>
		<result column="REF_BNO" property="refBno"/>
		<result column="REPLY_WRITER" property="replyWriter"/>
		<result column="CREATE_DATE" property="createDate"/>
		<result column="STATUS" property="status"/>
		<result column="RCOUNT" property="rcount"/>
	</resultMap>	
	<select id="replyList" resultMap="replyResultSet">
		SELECT REPLY_NO
				,REPLY_CONTENT
				,REPLY_WRITER
				,CREATE_DATE				
		FROM REPLY
		WHERE REF_BNO = #{boardNo}
		AND STATUS = 'Y'
	</select>
	<select id="selectRcount" parameterType="_int" resultType="_int">
		SELECT COUNT(*) as RCOUNT
		FROM REPLY
		WHERE REF_BNO = #{boardNo}
	</select>
	<insert id="insertReply" parameterType="Reply">
		INSERT INTO REPLY (REPLY_NO
							,REPLY_CONTENT
							,REF_BNO
							,REPLY_WRITER
							,CREATE_DATE
							,STATUS)
		VALUES (SEQ_RNO.NEXTVAL
				,#{replyContent}
				,#{refBno}
				,#{replyWriter}
				,SYSDATE
				,'Y')
	</insert>
</mapper>